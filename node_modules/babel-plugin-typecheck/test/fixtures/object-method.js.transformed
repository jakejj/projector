"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = demo;

function _typeof(obj) { return obj && typeof Symbol !== "undefined" && obj.constructor === Symbol ? "symbol" : typeof obj; }

var User = function User(input) {
  return input != null && (typeof input === "undefined" ? "undefined" : _typeof(input)) === 'object' && (input.name === undefined || typeof input.name === 'string') && (input.email === undefined || typeof input.email === 'string');
};

function demo(name, email) {
  var _user$something$other;

  var user = {
    name: "foo",
    email: "bar@example.com",

    something: (function (_something) {
      function something() {
        return _something.apply(this, arguments);
      }

      something.toString = function () {
        return _something.toString();
      };

      return something;
    })(function () {
      var _ref;

      this.name = name;

      if (!(typeof this.name === 'string')) {
        throw new TypeError("Value of \"this.name\" violates contract, expected string got " + (this.name === null ? 'null' : _typeof(this.name) === 'object' && this.name.constructor ? this.name.constructor.name || '[Unknown Object]' : _typeof(this.name)));
      }

      _ref = this;

      if (!(_ref != null && (typeof _ref === "undefined" ? "undefined" : _typeof(_ref)) === 'object' && typeof _ref.name === 'string' && typeof _ref.email === 'string' && typeof _ref.something === 'function')) {
        throw new TypeError("Value of variable \"_ref\" violates contract, expected { name: : string;\n  email: : string;\n  something(): : User;\n  other: any;\n} got " + (_ref === null ? 'null' : (typeof _ref === "undefined" ? "undefined" : _typeof(_ref)) === 'object' && _ref.constructor ? _ref.constructor.name || '[Unknown Object]' : typeof _ref === "undefined" ? "undefined" : _typeof(_ref)));
      }

      if (User(_ref)) {
        return _ref;
      } else {
        throw new TypeError("Function return value violates contract, expected User got " + (_ref === null ? 'null' : (typeof _ref === "undefined" ? "undefined" : _typeof(_ref)) === 'object' && _ref.constructor ? _ref.constructor.name || '[Unknown Object]' : typeof _ref === "undefined" ? "undefined" : _typeof(_ref)));
      }
    }),

    other: function other() {
      var _foo,
          _this = this;

      var foo = function foo() {
        _this.email = 'test@example.com';

        if (!(typeof _this.email === 'string')) {
          throw new TypeError("Value of \"this.email\" violates contract, expected string got " + (_this.email === null ? 'null' : _typeof(_this.email) === 'object' && _this.email.constructor ? _this.email.constructor.name || '[Unknown Object]' : _typeof(_this.email)));
        }

        return 'foo';
      };
      _foo = foo();

      if (typeof _foo === 'string') {
        return _foo;
      } else {
        throw new TypeError("Function return value violates contract, expected string got " + (_foo === null ? 'null' : (typeof _foo === "undefined" ? "undefined" : _typeof(_foo)) === 'object' && _foo.constructor ? _foo.constructor.name || '[Unknown Object]' : typeof _foo === "undefined" ? "undefined" : _typeof(_foo)));
      }
    }
  };

  if (!User(user)) {
    throw new TypeError("Value of variable \"user\" violates contract, expected User got " + (user === null ? 'null' : (typeof user === "undefined" ? "undefined" : _typeof(user)) === 'object' && user.constructor ? user.constructor.name || '[Unknown Object]' : typeof user === "undefined" ? "undefined" : _typeof(user)));
  }

  _user$something$other = user.something().other();

  if (typeof _user$something$other === 'string') {
    return _user$something$other;
  } else {
    throw new TypeError("Function \"demo\" return value violates contract, expected string got " + (_user$something$other === null ? 'null' : (typeof _user$something$other === "undefined" ? "undefined" : _typeof(_user$something$other)) === 'object' && _user$something$other.constructor ? _user$something$other.constructor.name || '[Unknown Object]' : typeof _user$something$other === "undefined" ? "undefined" : _typeof(_user$something$other)));
  }
}